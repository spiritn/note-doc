
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://spiritn.github.io/note-doc/java/spring/spring/Validation-DataBinding-Type-Conversion/">
      
      
      
      
        
      
      
      <link rel="icon" href="../../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>Validation DataBinding Type Conversion - 我的技术文档</title>
      
    
    
      <link rel="stylesheet" href="../../../../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../../../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#371-bean-validation" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../../.." title="我的技术文档" class="md-header__button md-logo" aria-label="我的技术文档" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            我的技术文档
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Validation DataBinding Type Conversion
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="indigo"  aria-hidden="true"  type="radio" name="__palette" id="__palette_0">
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



  

<nav class="md-nav md-nav--primary md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../.." title="我的技术文档" class="md-nav__button md-logo" aria-label="我的技术文档" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    我的技术文档
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_1" >
        
          
          <label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    数据库
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    数据库
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../database/02-mysql%E6%9E%B6%E6%9E%84/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    mySQL架构
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../database/00-%E5%9F%BA%E7%A1%80/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    基础
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../database/03-InnoDB%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    InnoDB存储引擎
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../database/04-%E7%B4%A2%E5%BC%95/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    索引
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../database/05-%E6%97%A5%E5%BF%97%E7%B3%BB%E7%BB%9F/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    日志系统
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Java
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Java
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../java8/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    JAVA8
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../IocContainer/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    spring
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  



<blockquote>
<p>There are pros and cons for considering validation as business logic, and Spring offers a design for validation (and data binding) that does not exclude either one of them. Specifically, validation should not be tied to the web tier and should be easy to localize, and it should be possible to plug in any available validator. Considering these concerns, Spring provides a <code>Validator</code> contract that is both basic and eminently usable in every layer of an application.</p>
<p>Data binding is useful for letting user input be dynamically bound to the domain model of an application (or whatever objects you use to process user input). Spring provides the aptly named <code>DataBinder</code> to do exactly that. The <code>Validator</code> and the <code>DataBinder</code> make up the <code>validation</code> package, which is primarily used in but not limited to the web layer.</p>
</blockquote>
<p>将数据校验视为业务逻辑是有利有弊的，spring提供的数据校验和数据绑定设计，不排斥其中任何一种。具体来说，校验不应该绑定到web层，应该易于本地化，而且应该插入任何可用的验证器。考虑到这些问题，spring提供了Validator规范，属于基础规范，可以在应用的任何一层使用。</p>
<p>数据绑定对于让用户的输入动态绑定到应用的domain中非常有用。spring提供了一个恰如其分的名字DataBinder来实现这个功能。Validator和DataBinder组成了validation包，它主要用于但是不限于web层。</p>
<blockquote>
<p>The <code>BeanWrapper</code> is a fundamental concept in the Spring Framework and is used in a lot of places. However, you probably do not need to use the <code>BeanWrapper</code> directly. Because this is reference documentation, however, we felt that some explanation might be in order. We explain the <code>BeanWrapper</code> in this chapter, since, if you are going to use it at all, you are most likely do so when trying to bind data to objects.</p>
<p>Spring’s <code>DataBinder</code> and the lower-level <code>BeanWrapper</code> both use <code>PropertyEditorSupport</code> implementations to parse and format property values. The <code>PropertyEditor</code> and <code>PropertyEditorSupport</code> types are part of the JavaBeans specification and are also explained in this chapter. Spring 3 introduced a <code>core.convert</code> package that provides a general type conversion facility, as well as a higher-level “format” package for formatting UI field values. You can use these packages as simpler alternatives to <code>PropertyEditorSupport</code> implementations. They are also discussed in this chapter.</p>
</blockquote>
<p>BeanWrapper属于spring的基本概念，在很多地方都会用到。然而,你可能不需要直接使用BeanWrapper。然而由于这是参考文档，我们认为可能需要一些解释。我们在这一章介绍BeanWrapper，因为如果你想要使用它，你可能是在尝试将数据绑定到对象。</p>
<p>spring的DataBinder和底层的BeanWrapper都使用<code>java.beans.PropertyEditorSupport</code>实现来解析和格式化属性值。<code>PropertyEditor</code> 和<code>PropertyEditorSupport</code> 都是javaBean规范的一部分，本章节会进行介绍。spring 3 引入了<code>core.convert</code>包提供了一个通用的类型转换工具，和顶层的“format"包用于格式化UI字段。你可以使用这些包作为<code>PropertyEditorSupport</code> 的简单替代品，本章也会进行介绍。</p>
<blockquote>
<p>Spring supports Java Bean Validation through setup infrastructure and an adaptor to Spring’s own <code>Validator</code> contract. Applications can enable Bean Validation once globally, as described in <a href="https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#validation-beanvalidation">Java Bean Validation</a>, and use it exclusively for all validation needs. In the web layer, applications can further register controller-local Spring <code>Validator</code> instances per <code>DataBinder</code>, as described in <a href="https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#validation-binder">Configuring a <code>DataBinder</code></a>, which can be useful for plugging in custom validation logic.</p>
</blockquote>
<p>Spring通过设置基础架构和spring自己的<code>Validator</code> 适配器来支持java的Bean Validation 。应用程序可以像<a href="https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#validation-beanvalidation">Java Bean Validation</a>描述的一样，在全局范围内一次启用Bean Validation，用于所有的validation需求。在web层，应用可以更进一步为每个DataBinder注册本地controller的Validator，这对于插入自定义的校验逻辑很有用。</p>
<h1 id="31-springvalidator">3.1 使用spring的校验Validator接口<a class="headerlink" href="#31-springvalidator" title="Permanent link">&para;</a></h1>
<h1 id="37-java-bean-validation">3.7 Java Bean Validation<a class="headerlink" href="#37-java-bean-validation" title="Permanent link">&para;</a></h1>
<p>spring框架提供了对 <a href="https://beanvalidation.org/">Java Bean Validation</a>的支持。</p>
<h2 id="371-bean-validation">3.7.1 Bean Validation总览<a class="headerlink" href="#371-bean-validation" title="Permanent link">&para;</a></h2>
<p>Bean Validation为java应用提供了一种通过约束声明和元数据进行验证的通用方式。要使用它，可以使用在model字段上注解，然后运行时强制执行。已经提供了一些内置约束，也可以定义自己的约束。</p>
<p>Bean Validation允许声明约束</p>
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">PersonForm</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="nd">@NotNull</span>
<span class="w">    </span><span class="nd">@Size</span><span class="p">(</span><span class="n">max</span><span class="o">=</span><span class="mi">64</span><span class="p">)</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="p">;</span>

<span class="w">    </span><span class="nd">@Min</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">age</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<p>Bean Validation validator会基于声明的注解约束校验这个类的实例. 更多信息查看 <a href="https://beanvalidation.org/">Bean Validation</a> 和<a href="https://hibernate.org/validator/">Hibernate Validator</a> 文档。Bean Validation是用于数据校验的一套规范，
而Hibernate Validator是此规范的参考实现且对其进行了扩展。</p>
<p>如果想要如何把bean validation provider注册为spring bean，继续往下阅读。 </p>
<h2 id="372-bean-validation-provider">3.7.2 配置Bean Validation Provider<a class="headerlink" href="#372-bean-validation-provider" title="Permanent link">&para;</a></h2>
<p>spring为Bean Validation API 提供了全面的支持，包括将Bean Validation Provider注册为spring bean。这允许你可以在需要校验的地方注入<code>javax.validation.ValidatorFactory</code> 或者<code>javax.validation.Validator</code>。</p>
<p>你可以使用LocalValidatorFactoryBean配置默认的validator为spring bean，如：</p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.validation.beanvalidation.LocalValidatorFactoryBean</span><span class="p">;</span>

<span class="nd">@Configuration</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">AppConfig</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="nd">@Bean</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">LocalValidatorFactoryBean</span><span class="w"> </span><span class="nf">validator</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">LocalValidatorFactoryBean</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>前面例子中基本配置是使用默认的引导机制触发bean的验证初始化。像Hibernate validator这样的Bean Validation provider，希望在classpath中被自动检测到。</p>
<p><code>LocalValidatorFactoryBean</code> 同时实现了 <code>javax.validation.ValidatorFactory</code> 和<code>javax.validation.Validator</code>, 也实现了 Spring的 <code>org.springframework.validation.Validator</code>。你可以将这些接口的引用注入到需要调用验证逻辑的bean中。</p>
<p>如果你更愿意使用Validator的API，可以直接注入java或spring的Validator使用。</p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">javax.validation.Validator</span><span class="p">;</span>

<span class="nd">@Service</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">MyService</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="nd">@Autowired</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Validator</span><span class="w"> </span><span class="n">validator</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.validation.Validator</span><span class="p">;</span>

<span class="nd">@Service</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">MyService</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="nd">@Autowired</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Validator</span><span class="w"> </span><span class="n">validator</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="_1">配置自定义的验证<a class="headerlink" href="#_1" title="Permanent link">&para;</a></h3>
<p>每个bean validation验证包含两部分：</p>
<ul>
<li><code>@Constraint</code> 注解，用来声明约束和可配置的属性</li>
<li><code>javax.validation.ConstraintValidator</code> 接口的实现类，具体的验证行为。</li>
</ul>
<blockquote>
<p>To associate a declaration with an implementation, each <code>@Constraint</code> annotation references a corresponding <code>ConstraintValidator</code> implementation class. At runtime, a <code>ConstraintValidatorFactory</code> instantiates the referenced implementation when the constraint annotation is encountered in your domain model.</p>
<p>By default, the <code>LocalValidatorFactoryBean</code> configures a <code>SpringConstraintValidatorFactory</code> that uses Spring to create <code>ConstraintValidator</code> instances. This lets your custom <code>ConstraintValidators</code> benefit from dependency injection like any other Spring bean.</p>
</blockquote>
<p>为了将声明和实现关联起来，每个@Constraint注解都会引用一个对应的<code>ConstraintValidator</code> 实现类。在运行时，当在model对象中遇到你定义的约束注解时，<code>ConstraintValidatorFactory</code> 就会实例化这个validator。</p>
<p>默认情况下， <code>LocalValidatorFactoryBean</code> 配置了 <code>SpringConstraintValidatorFactory</code> ，使用Spring来创建<code>ConstraintValidator</code>实例。这允许你自定义的<code>ConstraintValidators</code>像其他spring bean一样可以进行依赖注入。</p>
<p>下面的例子展示了一个自定义的@Constraint注解，它包含一个相关的ConstraintValidator实现，它可以使用Spring进行依赖注入。</p>
<div class="highlight"><pre><span></span><code><span class="nd">@Target</span><span class="p">({</span><span class="n">ElementType</span><span class="p">.</span><span class="na">METHOD</span><span class="p">,</span><span class="w"> </span><span class="n">ElementType</span><span class="p">.</span><span class="na">FIELD</span><span class="p">})</span>
<span class="nd">@Retention</span><span class="p">(</span><span class="n">RetentionPolicy</span><span class="p">.</span><span class="na">RUNTIME</span><span class="p">)</span>
<span class="nd">@Constraint</span><span class="p">(</span><span class="n">validatedBy</span><span class="o">=</span><span class="n">MyConstraintValidator</span><span class="p">.</span><span class="na">class</span><span class="p">)</span><span class="w"> </span><span class="c1">// 引用具体的验证实现</span>
<span class="kd">public</span><span class="w"> </span><span class="nd">@interface</span><span class="w"> </span><span class="n">MyConstraint</span><span class="w"> </span><span class="p">{</span>
<span class="p">}</span>


<span class="kn">import</span><span class="w"> </span><span class="nn">javax.validation.ConstraintValidator</span><span class="p">;</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">MyConstraintValidator</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">ConstraintValidator</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="nd">@Autowired</span><span class="p">;</span><span class="w"> </span><span class="c1">// 可以注入其他spring bean，进行业务逻辑方面的验证</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Foo</span><span class="w"> </span><span class="n">aDependency</span><span class="p">;</span>

<span class="w">    </span><span class="c1">// ...</span>
<span class="p">}</span>
</code></pre></div>
<p>下面列举两个开发中使用的案例：</p>
<p>特殊字符的校验：</p>
<div class="highlight"><pre><span></span><code><span class="cm">/**</span>
<span class="cm"> * 特殊字符注解</span>
<span class="cm"> *</span>
<span class="cm"> */</span>
<span class="nd">@Target</span><span class="p">({</span><span class="n">ElementType</span><span class="p">.</span><span class="na">METHOD</span><span class="p">,</span><span class="w"> </span><span class="n">ElementType</span><span class="p">.</span><span class="na">FIELD</span><span class="p">,</span><span class="w"> </span><span class="n">ElementType</span><span class="p">.</span><span class="na">ANNOTATION_TYPE</span><span class="p">,</span><span class="w"> </span><span class="n">ElementType</span><span class="p">.</span><span class="na">PARAMETER</span><span class="p">,</span><span class="w"> </span><span class="n">ElementType</span><span class="p">.</span><span class="na">TYPE_USE</span><span class="p">})</span>
<span class="nd">@Retention</span><span class="p">(</span><span class="n">RetentionPolicy</span><span class="p">.</span><span class="na">RUNTIME</span><span class="p">)</span>
<span class="nd">@Documented</span>
<span class="nd">@Constraint</span><span class="p">(</span><span class="n">validatedBy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="n">SpecialCharacterCustomerValidator</span><span class="p">.</span><span class="na">class</span><span class="p">})</span>
<span class="kd">public</span><span class="w"> </span><span class="nd">@interface</span><span class="w"> </span><span class="n">SpecialCharacter</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 默认提示为 input.string.special.charactor， 中文可定位为“参数中包含了特殊字符”</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="n">String</span><span class="w"> </span><span class="nf">message</span><span class="p">()</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="s">&quot;input.string.special.character&quot;</span><span class="p">;</span>

<span class="w">    </span><span class="n">Class</span><span class="o">&lt;?&gt;[]</span><span class="w"> </span><span class="nf">groups</span><span class="p">()</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="p">{};</span>

<span class="w">    </span><span class="n">Class</span><span class="o">&lt;?</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">Payload</span><span class="o">&gt;[]</span><span class="w"> </span><span class="nf">payload</span><span class="p">()</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="p">{};</span>

<span class="w">    </span><span class="n">String</span><span class="w"> </span><span class="nf">pattern</span><span class="p">()</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="s">&quot;[\\\\/:*?\&quot;&lt;|&#39;&gt;]&quot;</span><span class="p">;</span>
<span class="p">}</span>


<span class="cm">/**</span>
<span class="cm"> * 特殊字符校验</span>
<span class="cm"> *</span>
<span class="cm"> */</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">SpecialCharacterCustomerValidator</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">ConstraintValidator</span><span class="o">&lt;</span><span class="n">SpecialCharacter</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">pattern</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="p">;</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">initialize</span><span class="p">(</span><span class="n">SpecialCharacter</span><span class="w"> </span><span class="n">constraintAnnotation</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">pattern</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">constraintAnnotation</span><span class="p">.</span><span class="na">pattern</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>


<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * @param value</span>
<span class="cm">     * @param context</span>
<span class="cm">     * @return true 不含特殊字符  false 含特殊字符</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="nf">isValid</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">value</span><span class="p">,</span><span class="w"> </span><span class="n">ConstraintValidatorContext</span><span class="w"> </span><span class="n">context</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kt">boolean</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="p">;</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">StringUtils</span><span class="p">.</span><span class="na">isNotEmpty</span><span class="p">(</span><span class="n">value</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">Pattern</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Pattern</span><span class="p">.</span><span class="na">compile</span><span class="p">(</span><span class="n">pattern</span><span class="p">);</span>
<span class="w">            </span><span class="n">Matcher</span><span class="w"> </span><span class="n">m</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="na">matcher</span><span class="p">(</span><span class="n">value</span><span class="p">);</span>
<span class="w">            </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">!</span><span class="n">m</span><span class="p">.</span><span class="na">find</span><span class="p">();</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">result</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>枚举类的校验：</p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">com.jun.sail.sailvalidate.validater.EnumCheckValidator</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">javax.validation.Constraint</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">javax.validation.Payload</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.lang.annotation.ElementType</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.lang.annotation.Retention</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.lang.annotation.RetentionPolicy</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.lang.annotation.Target</span><span class="p">;</span>

<span class="nd">@Target</span><span class="p">({</span><span class="n">ElementType</span><span class="p">.</span><span class="na">METHOD</span><span class="p">,</span><span class="w"> </span><span class="n">ElementType</span><span class="p">.</span><span class="na">FIELD</span><span class="p">,</span><span class="w"> </span><span class="n">ElementType</span><span class="p">.</span><span class="na">ANNOTATION_TYPE</span><span class="p">})</span>
<span class="nd">@Retention</span><span class="p">(</span><span class="n">RetentionPolicy</span><span class="p">.</span><span class="na">RUNTIME</span><span class="p">)</span>
<span class="nd">@Constraint</span><span class="p">(</span><span class="n">validatedBy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">EnumCheckValidator</span><span class="p">.</span><span class="na">class</span><span class="p">)</span>
<span class="kd">public</span><span class="w"> </span><span class="nd">@interface</span><span class="w"> </span><span class="n">EnumCheck</span><span class="w"> </span><span class="p">{</span>

<span class="w">        </span><span class="cm">/**</span>
<span class="cm">         * 是否必填 默认是必填的</span>
<span class="cm">         */</span>
<span class="w">        </span><span class="kt">boolean</span><span class="w"> </span><span class="nf">required</span><span class="p">()</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="kc">true</span><span class="p">;</span>

<span class="w">        </span><span class="cm">/**</span>
<span class="cm">         * 验证失败的消息</span>
<span class="cm">         */</span>
<span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="nf">message</span><span class="p">()</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="s">&quot;枚举验证失败&quot;</span><span class="p">;</span>

<span class="w">        </span><span class="cm">/**</span>
<span class="cm">         * 分组的内容</span>
<span class="cm">         */</span>
<span class="w">        </span><span class="n">Class</span><span class="o">&lt;?&gt;[]</span><span class="w"> </span><span class="nf">groups</span><span class="p">()</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="p">{};</span>

<span class="w">        </span><span class="cm">/**</span>
<span class="cm">         * 错误验证的级别</span>
<span class="cm">         */</span>
<span class="w">        </span><span class="n">Class</span><span class="o">&lt;?</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">Payload</span><span class="o">&gt;[]</span><span class="w"> </span><span class="nf">payload</span><span class="p">()</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="p">{};</span>

<span class="w">        </span><span class="cm">/**</span>
<span class="cm">         * 枚举的Class</span>
<span class="cm">         */</span>
<span class="w">        </span><span class="n">Class</span><span class="o">&lt;?</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">Enum</span><span class="o">&lt;?&gt;&gt;</span><span class="w"> </span><span class="nf">enumClass</span><span class="p">();</span>

<span class="w">        </span><span class="cm">/**</span>
<span class="cm">         * 枚举中的验证方法，也就是枚举类中必须存在validation()方法，也可以自定义</span>
<span class="cm">         */</span>
<span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="nf">enumMethod</span><span class="p">()</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="s">&quot;validation&quot;</span><span class="p">;</span>
<span class="p">}</span>


<span class="cm">/**</span>
<span class="cm"> * 自定义的枚举验证器，</span>
<span class="cm"> *</span>
<span class="cm"> */</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">EnumCheckValidator</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">ConstraintValidator</span><span class="o">&lt;</span><span class="n">EnumCheck</span><span class="p">,</span><span class="w"> </span><span class="n">Object</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">Logger</span><span class="w"> </span><span class="n">logger</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">LoggerFactory</span><span class="p">.</span><span class="na">getLogger</span><span class="p">(</span><span class="n">EnumCheckValidator</span><span class="p">.</span><span class="na">class</span><span class="p">);</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">EnumCheck</span><span class="w"> </span><span class="n">enumCheck</span><span class="p">;</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">initialize</span><span class="p">(</span><span class="n">EnumCheck</span><span class="w"> </span><span class="n">enumCheck</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">enumCheck</span><span class="w"> </span><span class="o">=</span><span class="n">enumCheck</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="nf">isValid</span><span class="p">(</span><span class="n">Object</span><span class="w"> </span><span class="n">value</span><span class="p">,</span><span class="w"> </span><span class="n">ConstraintValidatorContext</span><span class="w"> </span><span class="n">constraintValidatorContext</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// 注解表明为必选项 则不允许为空，否则可以为空</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">value</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="na">enumCheck</span><span class="p">.</span><span class="na">required</span><span class="p">();</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="n">Boolean</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Boolean</span><span class="p">.</span><span class="na">FALSE</span><span class="p">;</span>
<span class="w">        </span><span class="n">Class</span><span class="o">&lt;?&gt;</span><span class="w"> </span><span class="n">valueClass</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">value</span><span class="p">.</span><span class="na">getClass</span><span class="p">();</span>
<span class="w">        </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="c1">//通过反射执行枚举类中的校验方法</span>
<span class="w">            </span><span class="n">Method</span><span class="w"> </span><span class="n">method</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="na">enumCheck</span><span class="p">.</span><span class="na">enumClass</span><span class="p">().</span><span class="na">getMethod</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="na">enumCheck</span><span class="p">.</span><span class="na">enumMethod</span><span class="p">(),</span><span class="w"> </span><span class="n">valueClass</span><span class="p">);</span>
<span class="w">            </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">Boolean</span><span class="p">)</span><span class="n">method</span><span class="p">.</span><span class="na">invoke</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span><span class="w"> </span><span class="n">value</span><span class="p">);</span>
<span class="w">            </span><span class="k">if</span><span class="p">(</span><span class="n">result</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">null</span><span class="p">){</span>
<span class="w">                </span><span class="k">return</span><span class="w"> </span><span class="kc">false</span><span class="p">;</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">Exception</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">logger</span><span class="p">.</span><span class="na">error</span><span class="p">(</span><span class="s">&quot;custom EnumCheckValidator error&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">result</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="spring-driven-method-validation">Spring-driven Method Validation<a class="headerlink" href="#spring-driven-method-validation" title="Permanent link">&para;</a></h3>
<blockquote>
<p>You can integrate the method validation feature supported by Bean Validation 1.1 (and, as a custom extension, also by Hibernate Validator 4.3) into a Spring context through a <code>MethodValidationPostProcessor</code> bean definition:</p>
</blockquote>
<p>您可以通过MethodValidationPostProcessor Bean定义将Bean Validation 1.1支持的方法验证功能集成到Spring上下文中（作为自定义扩展，也可以通过Hibernate Validator 4.3）。</p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">org.springframework.validation.beanvalidation.MethodValidationPostProcessor</span><span class="p">;</span>

<span class="nd">@Configuration</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">AppConfig</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="nd">@Bean</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">MethodValidationPostProcessor</span><span class="w"> </span><span class="nf">validationPostProcessor</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">MethodValidationPostProcessor</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<blockquote>
<p>To be eligible for Spring-driven method validation, all target classes need to be annotated with Spring’s <code>@Validated</code> annotation, which can optionally also declare the validation groups to use. See <a href="https://docs.spring.io/spring-framework/docs/5.3.1/javadoc-api/org/springframework/validation/beanvalidation/MethodValidationPostProcessor.html"><code>MethodValidationPostProcessor</code></a> for setup details with the Hibernate Validator and Bean Validation 1.1 providers.</p>
<p>Method validation relies on <a href="https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#aop-introduction-proxies">AOP Proxies</a> around the target classes, either JDK dynamic proxies for methods on interfaces or CGLIB proxies. There are certain limitations with the use of proxies, some of which are described in <a href="https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#aop-understanding-aop-proxies">Understanding AOP Proxies</a>. In addition remember to always use methods and accessors on proxied classes; direct field access will not work.</p>
</blockquote>
<p>为了符合Spring驱动的方法验证的条件，所有的目标类都需要用Spring的@Validated注解，它还可以选择性地声明要使用的验证组。请参阅<a href="https://docs.spring.io/spring-framework/docs/5.3.1/javadoc-api/org/springframework/validation/beanvalidation/MethodValidationPostProcessor.html"><code>MethodValidationPostProcessor</code></a>，了解与Hibernate Validator和Bean Validation 1.1 providers的设置细节。
方法验证依赖于目标类的AOP代理，可以是接口中方法的JDK动态代理，也可以是CGLIB代理。使用代理有一定的限制，其中一些限制在理解AOP代理中有所描述。另外记得一定要使用代理类的方法和访问器，直接访问字段是不行的。</p>
<h3 id="_2">其他配置选项<a class="headerlink" href="#_2" title="Permanent link">&para;</a></h3>
<blockquote>
<p>The default <code>LocalValidatorFactoryBean</code> configuration suffices for most cases. There are a number of configuration options for various Bean Validation constructs, from message interpolation to traversal resolution. See the <a href="https://docs.spring.io/spring-framework/docs/5.3.1/javadoc-api/org/springframework/validation/beanvalidation/LocalValidatorFactoryBean.html"><code>LocalValidatorFactoryBean</code></a> javadoc for more information on these options.</p>
</blockquote>
<p>默认的 "LocalValidatorFactoryBean "配置足以满足大多数情况，更多配置信息查看 <a href="https://docs.spring.io/spring-framework/docs/5.3.1/javadoc-api/org/springframework/validation/beanvalidation/LocalValidatorFactoryBean.html"><code>LocalValidatorFactoryBean</code></a> 。</p>
<h2 id="373-databinder">3.7.3 配置<code>DataBinder</code><a class="headerlink" href="#373-databinder" title="Permanent link">&para;</a></h2>
<p>从Spring 3 开始，可以为<code>DataBinder</code>配置Validator。配置后，就可以调用 <code>binder.validate()</code>.进行校验。任何校验错误Errors会自动添加到BindingResult。</p>
<p>下面展示如何使用<code>DataBinder</code>编程在绑定目标对象后进行校验逻辑</p>
<div class="highlight"><pre><span></span><code><span class="n">Foo</span><span class="w"> </span><span class="n">target</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Foo</span><span class="p">();</span>
<span class="n">DataBinder</span><span class="w"> </span><span class="n">binder</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">DataBinder</span><span class="p">(</span><span class="n">target</span><span class="p">);</span>
<span class="n">binder</span><span class="p">.</span><span class="na">setValidator</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">FooValidator</span><span class="p">());</span>

<span class="c1">// bind to the target object</span>
<span class="n">binder</span><span class="p">.</span><span class="na">bind</span><span class="p">(</span><span class="n">propertyValues</span><span class="p">);</span>

<span class="c1">// validate the target object</span>
<span class="n">binder</span><span class="p">.</span><span class="na">validate</span><span class="p">();</span>

<span class="c1">// get BindingResult that includes any validation errors</span>
<span class="n">BindingResult</span><span class="w"> </span><span class="n">results</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">binder</span><span class="p">.</span><span class="na">getBindingResult</span><span class="p">();</span>
</code></pre></div>
<p>也可以为<code>DataBinder</code>配置多个 <code>Validator</code> 实例，通过 <code>dataBinder.addValidators</code> and <code>dataBinder.replaceValidators</code>。This is useful when combining globally configured bean validation with a Spring <code>Validator</code> configured locally on a DataBinder instance. See <a href="https://docs.spring.io/spring-framework/docs/current/reference/html/web.html#mvc-config-validation">Spring MVC Validation Configuration</a>.</p>
<h2 id="374-spring-mvc-3-validation">3.7.4 spring-mvc 3 Validation<a class="headerlink" href="#374-spring-mvc-3-validation" title="Permanent link">&para;</a></h2>
<p>See <a href="https://docs.spring.io/spring-framework/docs/current/reference/html/web.html#mvc-config-validation">Validation</a> in the Spring MVC chapter.</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../../../..", "features": ["search.highlight", "navigation.instant", "navigation.tracking", "navigation.expand", "toc.integrate", "content.code.copy"], "search": "../../../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../../../assets/javascripts/bundle.79ae519e.min.js"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>